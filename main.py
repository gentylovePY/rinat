from aiogram import Bot, types
from aiogram import Dispatcher
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.dispatcher import Dispatcher, FSMContext
import logging
from aiogram.utils import executor
from aiogram.types import ReplyKeyboardRemove, \
    ReplyKeyboardMarkup, KeyboardButton, \
    InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.bot import api
from config import TOKEN
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
from config import ADMIN_ID
from asyncio import sleep
from states import NewItem, Mailing
from bd import  Users


logging.basicConfig(format=u'%(filename)s [LINE:%(lineno)d] #%(levelname)-8s [%(asctime)s] %(message)s',
                    level=logging.INFO)

storage = MemoryStorage()

PATCHES_URL="https://telegg.ru/orig/bot{token}/{method}"
setattr(api,"API_URL",PATCHES_URL)



CAT_BIG_EYES = "https://avatars.mds.yandex.net/get-pdb/404799/e98ba488-cffa-4b42-8ed2-d6eb0914c01d/s1200?webp=false"




bot = Bot(token=TOKEN)
dp = Dispatcher(bot,storage=storage)
Base = declarative_base()
greet_kb1 = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(KeyboardButton('–ö–æ—Ä–æ—Ç–∫–∏–π –≥–∞–π–¥'))
greet_kb2 = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(KeyboardButton('–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 1000–†'))
greet_kb3 = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(KeyboardButton('‚ù§–ì–û–¢–û–í–û'))
greet_kb5 = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(KeyboardButton('–ù–∞–∑–∞–¥ –∫ –∑–∞–¥–∞–Ω–∏—é'))
greet_kb4 = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(KeyboardButton('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É'))



@dp.message_handler(commands=["start"])
async def process_start_command(message: types.message):


    with open('start.jpg', 'rb') as photo:
        await message.answer_photo(photo,reply_markup=greet_kb1,
                                   caption='üì¢ –°—Ä–∞–∑—É –∫ –¥–µ–ª—É!\n\n–≠—Ç–æ—Ç –±–æ—Ç —Å–æ–∑–¥–∞–Ω —Å —Ü–µ–ª—é –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤ –µ–≥–æ –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –µ–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è—Ö! –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —è –º–æ–≥—É –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–º—É, –∫—Ç–æ —á–µ—Å—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç —É—Å–ª–æ–≤–∏—è –≤—ã–ø–ª–∞—Ç—É –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è!\n\n‚úÖ –ú–Ω–µ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –æ–±–º–∞–Ω—ã–≤–∞—Ç—å —Ç–µ–±—è, —Ç–∞–∫ –∫–∞–∫ —è –∑–∞—Ä–∞–±–æ—Ç–∞—é –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ –∏ –ø–æ–¥–µ–ª—é—Å—å —Å —Ç–æ–±–æ–π!\n–ü—Ä–∏—à–ª—é —Ç–µ–±–µ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ —É–∂–µ —Å–ø—É—Å—Ç—è 10 –º–∏–Ω—É—Ç —Ç—ã –∑–∞–±–µ—Ä—ë—à—å —É –º–µ–Ω—è 1000 —Ä—É–±–ª–µ–π.\n\nüòé –ù–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫—É "–ö–æ—Ä–æ—Ç–∫–∏–π –≥–∞–π–¥" –∏ –ø–æ–ª—É—á–∏—à—å —Å–∞–º—É—é –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —É–∂–µ —á–µ—Ä–µ–∑ –ø–∞—Ä—É –º–∏–Ω—É—Ç –ø—Ä–∏—Å—Ç—É–ø–∏—à—å –∫ –∑–∞—Ä–∞–±–æ—Ç–∫—É!')


@dp.message_handler(text=["–ö–æ—Ä–æ—Ç–∫–∏–π –≥–∞–π–¥"])
async def process_start_command2(message: types.Message):
    with open('photo_2020-03-18_15-07-20.jpg ', 'rb') as photo:
        await message.answer_photo(photo, reply_markup=greet_kb2, caption='üòâ–û —á–µ–º —Ç–µ–±–µ –Ω–µ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å:\n\n1.–ó–∞–¥–∞–Ω–∏–µ –≤ —ç—Ç–æ–º –±–æ—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª–µ–≥–∞–ª—å–Ω—ã –∏ –Ω–µ –Ω–∞—Ä—É—à–∞—é—Ç –∑–∞–∫–æ–Ω—ã!\n2. –Ø –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞—é —á–µ—Å—Ç–Ω—ã–π —Ç—Ä—É–¥! \n3. –ì–¥–µ –±—ã —Ç—ã –Ω–µ –≤–≤–æ–¥–∏–ª –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–±–µ –Ω–∏—á–µ–≥–æ –Ω–µ –≥—Ä–æ–∑–∏—Ç! –Ø –ª–∏—á–Ω–æ –∏ –º–æ–∏ —Ä–æ–¥–Ω—ã–µ –ø—Ä–æ—à–ª–∏ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ.\n\nüïµÔ∏è –ß—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å:\n\n1. –•–æ—á–µ—à—å –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ - –≤—ã–ø–æ–ª–Ω—è–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±–æ—Ç–∞ –Ω–∞ –≤—Å–µ 100%\n2. –ù–µ —Ö–∏—Ç—Ä–∏, –Ω–µ –æ–±—Ä–µ–∑–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –Ω–µ –¥–µ–ª–∞–π –ª–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.\n\nü§ë –ü—Ä–∏—Å—Ç—É–ø–∏–º –∫ –∑–∞—Ä–∞–±–æ—Ç–∫—É –º–æ–Ω–µ—Ç—ã!\n–ù–∞ –∑–∞–¥–∞–Ω–∏–µ —É —Ç–µ–±—è —É–π–¥–µ—Ç –ø–æ—Ä—è–¥–∫–∞ 7-10 –º–∏–Ω—É—Ç –∏ —Ç—ã –ø–æ–ª—É—á–∏—à—å –æ—Ç –º–µ–Ω—è 1000 —Ä—É–±–ª–µ–π!\n\n–ì–æ—Ç–æ–≤? - –ù–∞–∂–∏–º–∞–π "–ó–ê–†–ê–ë–û–¢–ê–¢–¨ 1000–†"')


@dp.message_handler(text=["–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 1000–†",'–ù–∞–∑–∞–¥ –∫ –∑–∞–¥–∞–Ω–∏—é'])
async def process_start_command3(message: types.Message):
    with open('photo.jpg', 'rb') as photo:
        await message.answer_photo(photo, reply_markup=greet_kb3, caption='–ü—Ä–∏–º–µ—Ä –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é')
    await message.answer('üíµ –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–¥–∞–Ω–∏–µ:\n\n–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ‚âà7-10 –º–∏–Ω\n–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ: 1000 —Ä—É–±.\n–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –õ–µ–≥–∫–∏–π\n–¢–∏–ø: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –¥–µ–π—Å—Ç–≤–∏–µ–º\n\n–£—Å–ª–æ–≤–∏—è:\n1. –ó–∞–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç: https://bets-money.ru/ \n2. –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ¬´–ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞¬ª\n3. –í–≤–µ—Å—Ç–∏ –≤ –ø–æ–ª–µ —Å–≤–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω \n4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ¬´–≤—ã—Å–ª–∞—Ç—å —Å–º—Å¬ª\n5. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\n6. –í—ã–±—Ä–∞—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ–Ω—É—Å (–ª—é–±–æ–π)\n7. –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ-–∫–æ–¥ ml_1358\n\nü•≥ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –∞–∫–∫–∞—É–Ω—Ç, —Å–æ—Ö—Ä–∞–Ω–∏ –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–æ–º–Ω–∏ –ª–æ–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–µ–Ω—å–≥–∏.\n\n8. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞—à—ë–ª –≤ –∞–∫–∫–∞—É–Ω—Ç, —Ç—ã –¥–æ–ª–∂–µ–Ω –ø–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á—ë—Ç –æ—Ç 50 —Ä—É–±–ª–µ–π –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.\n\nüòâ –°–¥–µ–ª–∞–ª? –¢–æ–ª—å–∫–æ –Ω–µ –æ–±–º–∞–Ω—ã–≤–∞–π, —è –ø—Ä–æ–≤–µ—Ä—è—é –≤—Å–µ –≤ —Ä—É—á–Ω—É—é. –ê–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–µ —Ä–∞–Ω—å—à–µ —ç—Ç–æ–≥–æ –¥–Ω—è. –ü—Ä–æ—à–ª—ã–µ, —Å—Ç–∞—Ä—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è. –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–π –∏ —Ç–æ–ª—å–∫–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –æ—Ç 50 —Ä—É–±.\n\n–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É ‚ù§Ô∏è –ì–û–¢–û–í–û, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ —É—Å–ª–æ–≤–∏—è.')

@dp.message_handler(text=["‚ù§–ì–û–¢–û–í–û"])
async def process_start_command4(message: types.Message):
   await message.answer('üéâ –û—Ç–ª–∏—á–Ω–æ, –æ—Å—Ç–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–∏ –¥–µ–Ω—å–≥–∏ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è! –ó–∞–ø–æ–ª–Ω—è–π —Ñ–æ—Ä–º—É –Ω–∏–∂–µ –∏ —è —Å–∫–∏–Ω—É —Ç–µ–±–µ —Ç–≤–æ–∏ —á–µ—Å—Ç–Ω–æ, –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏!\n\n–§–æ—Ä–º–∞ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã:\n–í–ê–ñ–ù–û! –°–û–ë–õ–Æ–î–ê–ô –û–ë–†–ê–ó–ï–¶ 1 –ö 1! –°–û–û–ë–©–ï–ù–ò–Ø –ù–ï –ü–û –§–ê–û–†–ú–ï –†–ê–°–ú–ê–¢–†–ò–í–ê–Æ–¢–°–Ø –í –ü–û–°–õ–ï–î–ù–Æ–Æ –û–ß–ï–†–ï–î–¨!\n1. –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –∑–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª: \n(–¢—É—Ç —Ç—ã –ø–∏—à–∏ –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞, –Ω–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–µ –ø–æ—á—Ç—É –∞ –∏–º–µ–Ω–Ω–æ –ª–æ–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –ø—Ä–∏—Å–ª–∞–ª–∏ –≤–º–µ—Å—Ç–µ —Å –ø–∞—Ä–æ–ª–µ–º)\n2. –¢–≤–æ–π QIWI –∫–æ—à–µ–ª–µ–∫, –∏–ª–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–µ–Ω—å–≥–∏:\n3. –í—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —Å–¥–µ–ª–∞–ª\n\n–ö–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç—ã –≤ –∏—Ç–æ–≥–µ –¥–æ–ª–∂–µ–Ω –º–Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:\n\n–ü—Ä–∏–≤–µ—Ç, —è –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ —É—Å–ª–æ–≤–∏—è\n–õ–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞: 0000000\n–ú–æ–π Qiwi: +7 –∏–ª–∏ –∫–∞—Ä—Ç—É\nüåã–í—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –¥–µ–ª–∞–ª\n\n–ï—Å–ª–∏ —Ç—ã –∑–∞–¥—É–º–∞–ª –º–µ–Ω—è –æ–±–º–∞–Ω—É—Ç—å —Ç–æ –Ω–µ —Å—Ç–æ–∏—Ç, –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –∏ —Ç–∞–∫ –∂–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è —Ç–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –ø–æ –ª–æ–≥–∏–Ω—É –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –¥–∞—à—å.\n\n–ì–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É? –ù–∞–∂–∏–º–∞–π "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É"',reply_markup=greet_kb4)


@dp.message_handler(text=["–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É"])
async def process_start_command5(message: types.Message):
   await message.answer('üë©‚Äçüíª –ö–æ–Ω—Ç–∞–∫—Ç—ã:\n\n–õ–∏—á–Ω–æ —Å–∞–º–∞ –î–∞—à–∞ –∫–æ—Ç–æ—Ä–∞—è –ø–ª–∞—Ç–∏—Ç: @dasha_fastmoney  \nüëÜ —Ñ–æ—Ä–º—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—é–¥–∞\n\n–í–∞–∂–Ω–æ! –°–∫–∏–Ω—É–ª —Ñ–æ—Ä–º—É –ø–æ –æ–±—Ä–∞–∑—Ü—É, —Å–∫–∏–Ω—É–ª —Å–∫—Ä–∏–Ω—ã –∏ —Å–∏–¥–∏ –∂–¥–∏! –ï—Å–ª–∏ –±—É–¥–µ—à—å –∫–∏–¥–∞—Ç—å –µ—â–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Ç–æ —Å –∫–∞–∂–¥—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Ç—ã –±—É–¥–µ—à—å –ø–æ–≤—ã—à–∞—Ç—å —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—ã–ø–ª–∞—Ç—É!\n\n‚úäüôè –î—Ä—É–≥, 1 –ø—Ä–æ—Å—å–±–∞. –í–æ—Ç —è —á–µ—Å—Ç–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞—é —Ç—Ä—É–¥ –∫–∞–∂–¥–æ–≥–æ, –Ω–µ –ø—ã—Ç–∞–π—Å—è –º–µ–Ω—è –æ–±–º–∞–Ω—É—Ç—å, –ø–æ–¥–¥–µ–ª–∞–≤ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ –µ—â–µ —á–µ–≥–æ. –î–∞–≤–∞–π —Ç—ã –¥–µ–ª–∞–π —Ç–∞–∫, —á—Ç–æ–±—ã –º–Ω–µ —É–ø–∞–ª–∞ –∫–æ–ø–µ–π–∫–∞, –∞ —è –ø–æ–¥–µ–ª—é—Å—å —Å —Ç–æ–±–æ–π.',reply_markup=greet_kb5)


@dp.message_handler(commands=['photo'])
async def process_photo_command(message: types.Message):

    await bot.send_photo(message.from_user.id,CAT_BIG_EYES)


@dp.message_handler(user_id=ADMIN_ID, commands=["tell_everyone"])
async def mailing(message: types.Message):
    await message.answer("–ü—Ä–∏—à–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏")
    await Mailing.Text.set()








if __name__ == '__main__':
    executor.start_polling(dp)
